<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SafeStud | Student & Admin System</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
<style>
* { box-sizing:border-box; font-family:'Orbitron', sans-serif; margin:0; padding:0; }
body {
  min-height:100vh; display:flex; justify-content:center; align-items:center;
  background: radial-gradient(circle at center, #0f0c29, #302b63, #24243e);
  color:#00ffff; overflow:hidden;
}
.container { width:95%; max-width:600px; position:relative; perspective:1000px; }

/* Branding */
.branding { text-align:center; margin-bottom:20px; }
.logo-wrapper { position:relative; cursor:pointer; display:inline-block; }
.logo { width:90px; height:90px; filter: drop-shadow(0 0 15px #4fd1ff); }
.brand-name { font-size:2rem; color:#4fd1ff; margin-top:8px; letter-spacing:2px; }

/* Cards */
.card { display:none; flex-direction:column; gap:12px; background:rgba(0,0,0,0.4); 
       backdrop-filter:blur(15px); border-radius:25px; padding:25px; 
       box-shadow: 0 0 20px #00ffff,0 20px 40px rgba(0,255,255,0.2); position:relative; }
.card.show { display:flex; }
.card input { padding:10px; border-radius:8px; border:none; outline:none; width:100%; margin-bottom:8px; }
.card button { padding:12px; border-radius:12px; border:2px solid #00ffff; background:rgba(0,0,0,0.3);
               color:#00ffff; font-weight:600; cursor:pointer; transition:0.3s; position:relative; overflow:hidden;}
.card button:hover { transform:scale(1.05); box-shadow:0 0 20px #00ffff; }

/* Remember me */
.remember { display:flex; align-items:center; gap:5px; margin-bottom:10px; }

/* Assistance */
.help { color:#4fd1ff; cursor:pointer; text-decoration:underline; font-size:.9rem; margin-top:5px; }

/* Details cards */
.detail-card { gap:8px; }
.detail-card p { opacity:1; }

/* Admin table */
table { width:100%; border-collapse:collapse; margin-top:10px; }
th, td { border:1px solid #00ffff; padding:8px; text-align:center; }

/* Floating card animation */
@keyframes floatCard {0%{transform:translateY(0px);}100%{transform:translateY(-10px);}}
.floating { animation: floatCard 4s ease-in-out infinite alternate; }
</style>
</head>
<body>

<div class="container">

  <!-- Branding -->
  <div class="branding">
    <div class="logo-wrapper">
      <img src="https://i.ibb.co/8K8d0L0/shield.png" class="logo" alt="SafeStud Logo">
      <div class="brand-name">SafeStud</div>
    </div>
  </div>

  <!-- Login Card -->
  <div class="card show" id="loginCard">
    <h2>Login</h2>
    <input type="text" id="loginId" placeholder="Student / Admin ID">
    <input type="password" id="loginPass" placeholder="Password">
    <div class="remember">
      <input type="checkbox" id="rememberMe">
      <label for="rememberMe">Remember Me</label>
    </div>
    <button onclick="login()">Login</button>
    <button onclick="showCard('emergencyCard')">Emergency Access</button>
    <div class="help" onclick="toggleAssistance()">Ask for assistance / Help</div>
    <div id="assistancePanel" style="display:none; margin-top:10px;">
      <p>Select your request:</p>
      <button onclick="alert('Technical issue, contact ICT admin')">Technical Issue</button>
      <button onclick="alert('Guidance / Counseling')">Guidance / Counseling</button>
      <button onclick="alert('Academic Question')">Academic Question</button>
      <p>Or type your question:</p>
      <input type="text" id="assistanceQuestion" placeholder="Type question">
      <button onclick="submitQuestion()">Submit Question</button>
    </div>
  </div>

  <!-- Emergency Access -->
  <div class="card" id="emergencyCard">
    <h2>Emergency Access</h2>
    <input type="text" id="emergencyInput" placeholder="Enter Student ID or Name">
    <button onclick="viewEmergency()">View Info</button>
    <button onclick="backToLogin('emergencyCard')">Back</button>
    <div id="emergencyInfo"></div>
  </div>

  <!-- Student Main Menu -->
  <div class="card" id="studentMenu">
    <h2>Student Menu</h2>
    <button onclick="viewStudentInfo()">Student Info</button>
    <button onclick="showCard('subjectsCard')">Subjects</button>
    <button onclick="showCard('scheduleCard')">Schedule</button>
    <button onclick="showCard('googleLinksCard')">Google Classroom Links</button>
    <button onclick="logout()">Logout</button>
  </div>

  <!-- Student Info Card -->
  <div class="card detail-card" id="studentInfoCard">
    <h2>Student Info</h2>
    <div id="studentDetails"></div>
    <button onclick="backToMenu('studentInfoCard')">Back</button>
  </div>

  <!-- Subjects -->
  <div class="card detail-card" id="subjectsCard">
    <h2>Subjects</h2>
    <p>Math</p>
    <p>Science</p>
    <p>ICT</p>
    <button onclick="backToMenu('subjectsCard')">Back</button>
  </div>

  <!-- Schedule -->
  <div class="card detail-card" id="scheduleCard">
    <h2>Schedule</h2>
    <p>Mon: Math</p>
    <p>Tue: Science</p>
    <p>Wed: ICT</p>
    <button onclick="backToMenu('scheduleCard')">Back</button>
  </div>

  <!-- Google Links -->
  <div class="card detail-card" id="googleLinksCard">
    <h2>Google Classroom Links</h2>
    <p><a href="#" target="_blank">Math</a></p>
    <p><a href="#" target="_blank">Science</a></p>
    <p><a href="#" target="_blank">ICT</a></p>
    <button onclick="backToMenu('googleLinksCard')">Back</button>
  </div>

  <!-- Admin Panel -->
  <div class="card" id="adminPanel">
    <h2>Admin Panel</h2>
    <button onclick="showCard('addStudentCard')">Add Student</button>
    <button onclick="showCard('editStudentCard')">Edit / Delete Student</button>
    <button onclick="logout()">Logout</button>
  </div>

  <!-- Add Student -->
  <div class="card" id="addStudentCard">
    <h2>Add Student</h2>
    <input type="text" id="addId" placeholder="Student ID">
    <input type="text" id="addName" placeholder="Student Name">
    <input type="text" id="addContact" placeholder="Contact Number">
    <input type="text" id="addAddress" placeholder="Address">
    <button onclick="addStudent()">Add Student</button>
    <button onclick="backToMenu('addStudentCard')">Back</button>
  </div>

  <!-- Edit / Delete Student -->
  <div class="card" id="editStudentCard">
    <h2>Edit / Delete Student</h2>
    <select id="selectStudent"></select>
    <input type="text" id="editName" placeholder="Name">
    <input type="text" id="editContact" placeholder="Contact">
    <input type="text" id="editAddress" placeholder="Address">
    <label><input type="checkbox" id="editStatus"> Active</label>
    <button onclick="updateStudent()">Update</button>
    <button onclick="deleteStudent()">Delete</button>
    <button onclick="backToMenu('editStudentCard')">Back</button>
  </div>

</div>

<script>
// LocalStorage setup
let students = JSON.parse(localStorage.getItem('students')) || {
  "student1": {name:"John Doe", contact:"09123456789", address:"123 Main St", active:true}
};
localStorage.setItem('students', JSON.stringify(students));

let admin = {id:"admin", pass:"1234"};

let currentUser="";

// Show card
function showCard(id){
  document.querySelectorAll('.card').forEach(c=>c.classList.remove('show'));
  document.getElementById(id).classList.add('show');
}

// Back buttons
function backToLogin(id){ showCard('loginCard'); clearInputs(); }
function backToMenu(id){ showCard('studentMenu'); }

// Assistance
function toggleAssistance(){
  let panel=document.getElementById('assistancePanel');
  panel.style.display = panel.style.display==='none'?'block':'none';
}
function submitQuestion(){
  let q=document.getElementById('assistanceQuestion').value;
  if(q.trim()==='') alert('Please type a question');
  else { alert('Question submitted:\n'+q); document.getElementById('assistanceQuestion').value=''; }
}

// Login
function login(){
  let id=document.getElementById('loginId').value;
  let pass=document.getElementById('loginPass').value;
  if(id===admin.id && pass===admin.pass){ currentUser='admin'; showCard('adminPanel'); return; }
  if(students[id] && students[id].active){ currentUser=id; showCard('studentMenu'); return; }
  alert('Invalid login or inactive account');
}

// Logout
function logout(){
  if(confirm('Are you sure you want to logout?')){
    currentUser=""; showCard('loginCard'); clearInputs();
  }
}

// Clear inputs
function clearInputs(){
  document.querySelectorAll('input').forEach(i=>i.value='');
}

// View student info
function viewStudentInfo(){
  let details=document.getElementById('studentDetails');
  if(currentUser && students[currentUser]){
    let s=students[currentUser];
    details.innerHTML=`ID: ${currentUser}<br>Name: ${s.name}<br>Contact: ${s.contact}<br>Address: ${s.address}`;
    showCard('studentInfoCard');
  }
}

// Emergency
function viewEmergency(){
  let val=document.getElementById('emergencyInput').value.toLowerCase();
  let div=document.getElementById('emergencyInfo');
  let found=false;
  for(let key in students){
    let s=students[key];
    if(key.toLowerCase()===val || s.name.toLowerCase()===val){
      div.innerHTML=`ID: ${key}<br>Name: ${s.name}<br>Contact: ${s.contact}<br>Address: ${s.address}<br>Status: ${s.active?'Active':'Blocked'}`;
      found=true;
    }
  }
  if(!found) div.innerHTML='Student not found';
}

// Add student
function addStudent(){
  let id=document.getElementById('addId').value;
  if(!id) return alert('Enter ID');
  students[id]={name:document.getElementById('addName').value, contact:document.getElementById('addContact').value,
                address:document.getElementById('addAddress').value, active:true};
  localStorage.setItem('students', JSON.stringify(students));
  alert('Student added');
  populateSelect();
}

// Edit / delete
function populateSelect(){
  let sel=document.getElementById('selectStudent');
  sel.innerHTML='';
  for(let key in students) sel.innerHTML+='<option value="'+key+'">'+key+' - '+students[key].name+'</option>';
}
populateSelect();

function updateStudent(){
  let key=document.getElementById('selectStudent').value;
  students[key].name=document.getElementById('editName').value || students[key].name;
  students[key].contact=document.getElementById('editContact').value || students[key].contact;
  students[key].address=document.getElementById('editAddress').value || students[key].address;
  students[key].active=document.getElementById('editStatus').checked;
  localStorage.setItem('students', JSON.stringify(students));
  alert('Updated');
  populateSelect();
}

function deleteStudent(){
  let key=document.getElementById('selectStudent').value;
  delete students[key];
  localStorage.setItem('students', JSON.stringify(students));
  alert('Deleted');
  populateSelect();
}

// Update edit fields when select changes
document.getElementById('selectStudent').onchange=function(){
  let s=students[this.value];
  document.getElementById('editName').value=s.name;
  document.getElementById('editContact').value=s.contact;
  document.getElementById('editAddress').value=s.address;
  document.getElementById('editStatus').checked=s.active;
}
</script>
</body>
</html>
