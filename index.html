<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SafeStud | Student & Admin System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Poppins',sans-serif}
body{
  min-height:100vh;
  background:radial-gradient(circle at top,#12364a,#0b1f2a);
  display:flex;
  justify-content:center;
  align-items:center;
  color:#eafcff;
}
.container{width:95%;max-width:460px}

/* BRAND */
.brand{text-align:center;margin-bottom:20px}
.logo{
  width:85px;height:85px;margin:0 auto 10px;border-radius:50%;
  background:linear-gradient(135deg,#4fd1ff,#7cffcb);
  display:flex;align-items:center;justify-content:center;
  font-size:34px;color:#003344;
  box-shadow:0 0 25px rgba(79,209,255,.9)
}
.brand h1{font-family:'Orbitron',sans-serif;color:#4fd1ff}
.brand small{opacity:.8}

/* CARD */
.card{
  display:none;
  background:rgba(15,45,60,.92);
  border-radius:18px;
  padding:18px;
  box-shadow:0 0 25px rgba(79,209,255,.35);
}
.card.show{display:block}
h2{text-align:center;color:#4fd1ff;margin-bottom:10px}

/* INPUT */
input{
  width:100%;padding:9px;margin:5px 0;
  border-radius:8px;border:none;outline:none
}

/* BUTTON */
button{
  width:100%;padding:9px;margin-top:6px;
  border-radius:10px;border:2px solid #4fd1ff;
  background:transparent;color:#4fd1ff;
  font-weight:600;cursor:pointer
}
button:hover{background:#4fd1ff;color:#003344}
.danger{border-color:#ff6b6b;color:#ff6b6b}
.danger:hover{background:#ff6b6b;color:#fff}
.back{opacity:.7}

/* HELP / REMEMBER */
.help{
  text-align:center;
  margin-top:8px;
  font-size:.8rem;
  cursor:pointer;
  color:#7cffcb;
  text-decoration:underline;
}
.remember{
  display:flex;
  align-items:center;
  gap:6px;
  font-size:.75rem;
  margin-top:6px;
}

/* TABLE */
table{width:100%;border-collapse:collapse;font-size:.8rem}
th,td{border-bottom:1px solid #4fd1ff;padding:5px;text-align:center}
.active{color:#7cffcb}
.blocked{color:#ff6b6b}
.small-btn{font-size:.65rem;padding:4px 6px;margin:2px;border-radius:6px}
</style>
</head>

<body>
<div class="container">

<div class="brand">
  <div class="logo">üõ°Ô∏è</div>
  <h1>SafeStud</h1>
  <small>Student Information & Emergency Access System</small>
</div>

<!-- LOGIN -->
<div class="card show" id="login">
  <h2>Login</h2>
  <input id="loginId" placeholder="Student / Admin ID">
  <input id="loginPass" type="password" placeholder="Password">

  <div class="remember">
    <input type="checkbox" id="rememberMe"> Remember Me
  </div>

  <button onclick="login()">Login</button>
  <button class="danger" onclick="show('emergency')">Emergency Access</button>

  <div class="help" onclick="alert('Please contact the school administrator or ICT office for assistance.')">
    Ask for assistance / Help
  </div>
</div>

<!-- STUDENT MENU -->
<div class="card" id="menu">
  <h2>Student Menu</h2>
  <button onclick="showProfile()">Student Information</button>
  <button onclick="show('subjects')">Subjects</button>
  <button onclick="show('schedule')">Schedule</button>
  <button class="back" onclick="logout()">Logout</button>
</div>

<!-- PROFILE -->
<div class="card" id="profile">
  <h2>Student Profile</h2>
  <div id="profileInfo"></div>
  <button class="back" onclick="show('menu')">Back</button>
</div>

<!-- SUBJECTS -->
<div class="card" id="subjects">
  <h2>Subjects</h2>
  <p>‚Ä¢ Mathematics</p><p>‚Ä¢ Science</p><p>‚Ä¢ ICT</p>
  <button class="back" onclick="show('menu')">Back</button>
</div>

<!-- SCHEDULE -->
<div class="card" id="schedule">
  <h2>Schedule</h2>
  <p>Mon‚ÄìWed: ICT</p><p>Thu: Math</p><p>Fri: Science</p>
  <button class="back" onclick="show('menu')">Back</button>
</div>

<!-- EMERGENCY -->
<div class="card" id="emergency">
  <h2>Emergency Access</h2>
  <input id="emInput" placeholder="Student ID or Name">
  <button onclick="emergencyView()">View</button>
  <div id="emInfo"></div>
  <button class="back" onclick="backLogin()">Back</button>
</div>

<!-- ADMIN -->
<div class="card" id="admin">
  <h2>Admin Panel</h2>

  <!-- ADD STUDENT -->
  <h3>Add Student</h3>
  <input id="addId" placeholder="Student ID">
  <input id="addName" placeholder="Full Name">
  <input id="addContact" placeholder="Contact Number">
  <input id="addAddress" placeholder="Address">
  <button onclick="addStudent()">Add Student</button>

  <!-- UPDATE STUDENT -->
  <h3 style="margin-top:10px">Update Student</h3>
  <input id="updId" placeholder="Student ID">
  <input id="updName" placeholder="Full Name">
  <input id="updContact" placeholder="Contact Number">
  <input id="updAddress" placeholder="Address">
  <button onclick="updateStudent()">Update Student</button>

  <table>
    <thead>
      <tr><th>ID</th><th>Name</th><th>Status</th><th>Action</th></tr>
    </thead>
    <tbody id="adminTable"></tbody>
  </table>

  <button class="back" onclick="logout()">Logout</button>
</div>

</div>

<script>
/* STORAGE */
const key="safestud_students";
let students=JSON.parse(localStorage.getItem(key))||{
  "2024-001":{name:"Juan Dela Cruz",contact:"09123456789",address:"GMA Cavite",status:"active"}
};
function save(){localStorage.setItem(key,JSON.stringify(students))}

let currentUser=null;

/* NAV */
function show(id){
  document.querySelectorAll('.card').forEach(c=>c.classList.remove('show'));
  document.getElementById(id).classList.add('show');
}

/* LOGIN */
function login(){
  let id=loginId.value, pass=loginPass.value;

  if(rememberMe.checked) localStorage.setItem("remember",id);
  else localStorage.removeItem("remember");

  if(id==="admin" && pass==="admin123"){loadAdmin();show("admin");return;}

  if(students[id]){
    if(students[id].status==="blocked"){alert("Account blocked");return;}
    if(pass==="1234"){currentUser=id;show("menu")}
    else alert("Wrong password");
  } else alert("Account not found");
}

/* LOGOUT */
function logout(){
  if(confirm("Are you sure you want to logout?")){
    document.querySelectorAll("input").forEach(i=>i.value="");
    currentUser=null;
    show("login");
  }
}

/* PROFILE */
function showProfile(){
  let s=students[currentUser];
  profileInfo.innerHTML=`
  <p><b>Name:</b> ${s.name}</p>
  <p><b>Contact:</b> ${s.contact}</p>
  <p><b>Address:</b> ${s.address}</p>
  <p><b>Status:</b> ${s.status}</p>`;
  show("profile");
}

/* EMERGENCY */
function emergencyView(){
  let v=emInput.value.toLowerCase();
  for(let id in students){
    let s=students[id];
    if(v===id.toLowerCase()||v===s.name.toLowerCase()){
      emInfo.innerHTML=`<p><b>Name:</b> ${s.name}</p>
      <p><b>Contact:</b> ${s.contact}</p>
      <p><b>Address:</b> ${s.address}</p>`;
      return;
    }
  }
  emInfo.innerHTML="Student not found";
}
function backLogin(){emInput.value="";emInfo.innerHTML="";show("login")}

/* ADMIN */
function loadAdmin(){
  adminTable.innerHTML="";
  for(let id in students){
    let s=students[id];
    adminTable.innerHTML+=`
    <tr>
      <td>${id}</td>
      <td>${s.name}</td>
      <td class="${s.status}">${s.status}</td>
      <td>
        <button class="small-btn" onclick="prepUpdate('${id}')">Edit</button>
        <button class="small-btn" onclick="toggle('${id}')">${s.status==="active"?"Block":"Activate"}</button>
        <button class="small-btn danger" onclick="del('${id}')">Delete</button>
      </td>
    </tr>`;
  }
}
function addStudent(){
  if(!addId.value)return;
  students[addId.value]={name:addName.value,contact:addContact.value,address:addAddress.value,status:"active"};
  save();loadAdmin();
}
function prepUpdate(id){
  let s=students[id];
  updId.value=id;updName.value=s.name;updContact.value=s.contact;updAddress.value=s.address;
}
function updateStudent(){
  if(!updId.value)return;
  students[updId.value]={name:updName.value,contact:updContact.value,address:updAddress.value,status:students[updId.value].status};
  save();loadAdmin();
}
function toggle(id){
  students[id].status=students[id].status==="active"?"blocked":"active";
  save();loadAdmin();
}
function del(id){
  if(confirm("Delete this student?")){
    delete students[id];save();loadAdmin();
  }
}
</script>

</body>
</html>
